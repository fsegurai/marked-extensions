/* Playground Layout */
.main-playground {
    display: grid;
    grid-template-columns: 1fr 1fr; /* 50% Editor, 50% Preview */
    gap: 16px;
    padding: 16px;
    max-width: 1600px;
    margin: 0 auto;
    min-height: calc(100vh - 112px);

    @media (max-width: 1200px) {
        grid-template-columns: 2fr 3fr; /* 40% Editor, 60% Preview */
        max-width: 100%;
    }

    @media (max-width: 1024px) {
        grid-template-columns: 1fr;
        gap: 12px;
        padding: 12px;
    }
}

/* Editor Container */
.editor-container {
    display: flex;
    flex-direction: column;
    background: var(--md-sys-color-surface-container);
    border-radius: var(--border-radius);
    overflow: hidden;
    box-shadow: var(--shadow-md);
    transition: box-shadow 0.3s ease;
    height: fit-content;

    &:hover {
        box-shadow: var(--shadow-lg);
    }

    @media (min-width: 1025px) {
        position: sticky;
        top: 128px;
        max-height: calc(100vh - 144px);
    }
}

/* Preview Container */
.preview-container {
    display: flex;
    flex-direction: column;
    background: var(--md-sys-color-surface-container);
    border-radius: var(--border-radius);
    overflow: hidden;
    box-shadow: var(--shadow-md);
    transition: box-shadow 0.3s ease;
    height: 100%;
    min-height: 600px;
    max-width: 100%;

    &:hover {
        box-shadow: var(--shadow-lg);
    }
}

/* Toolbar Styles */
.editor-toolbar,
.preview-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 16px;
    background: var(--md-sys-color-surface-container-high);
    border-bottom: 1px solid var(--md-sys-color-outline-variant);
    min-height: 48px;

    & .editor-label,
    & .preview-label {
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 600;
        font-size: 14px;
        color: var(--md-sys-color-on-surface);

        & md-icon {
            font-size: 20px;
            color: var(--md-sys-color-primary);
        }

        & span {
            @media (max-width: 640px) {
                display: none;
            }
        }
    }

    & .toolbar-actions {
        display: flex;
        gap: 4px;

        & md-icon-button {
            transition: transform 0.2s ease;
            position: relative;

            &:hover {
                transform: scale(1.1);
            }

            &:active {
                transform: scale(0.9);
            }

            /* Tooltip on hover */

            &::after {
                content: attr(aria-label);
                position: absolute;
                bottom: -30px;
                left: 50%;
                transform: translateX(-50%) scale(0);
                background: rgba(0, 0, 0, 0.8);
                color: white;
                padding: 4px 8px;
                border-radius: 4px;
                font-size: 11px;
                white-space: nowrap;
                pointer-events: none;
                opacity: 0;
                transition: all 0.2s ease;
            }

            &:hover::after {
                transform: translateX(-50%) scale(1);
                opacity: 1;
            }
        }
    }
}

/* Editor Styles */
.md-editor {
    flex: 1;
    min-height: 500px;
    max-height: calc(100vh - 200px);
    padding: 16px;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    line-height: 1.6;
    border: none;
    outline: none;
    resize: vertical;
    background: var(--md-sys-color-surface);
    color: var(--md-sys-color-on-surface);
    transition: background-color 0.3s ease;

    &::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    &::-webkit-scrollbar-track {
        background: var(--md-sys-color-surface-container-low);
    }

    &::-webkit-scrollbar-thumb {
        background: var(--md-sys-color-outline);
        border-radius: 4px;

        &:hover {
            background: var(--md-sys-color-outline-variant);
        }
    }

    @media (max-width: 1024px) {
        min-height: 300px;
        max-height: 500px;
    }
}

/* Preview Styles */
.md-body {
    flex: 1;
    padding: 24px;
    overflow: auto;
    background: var(--md-sys-color-surface);
    color: var(--md-sys-color-on-surface);
    transition: background-color 0.3s ease;
    max-width: 100%;
    word-wrap: break-word;
    overflow-wrap: break-word;

    /* Ensure all child elements respect container width */
    & * {
        max-width: 100%;
    }

    /* Special handling for tables */
    & table {
        display: block;
        overflow-x: auto;
        width: 100%;
    }

    /* Special handling for pre/code blocks */
    & pre {
        overflow-x: auto;
        max-width: 100%;
    }

    /* Handle images */
    & img {
        max-width: 100%;
        height: auto;
    }

    &::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    &::-webkit-scrollbar-track {
        background: var(--md-sys-color-surface-container-low);
    }

    &::-webkit-scrollbar-thumb {
        background: var(--md-sys-color-outline);
        border-radius: 4px;

        &:hover {
            background: var(--md-sys-color-outline-variant);
        }
    }
}

/* Responsive adjustments */
@media (max-width: 640px) {
    .main-playground {
        padding: 8px;
        gap: 8px;
    }

    .editor-toolbar,
    .preview-toolbar {
        padding: 6px 12px;
    }

    .md-editor,
    .md-body {
        padding: 12px;
    }
}
